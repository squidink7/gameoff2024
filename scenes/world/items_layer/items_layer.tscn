[gd_scene load_steps=6 format=3 uid="uid://cbmo13yl883qf"]

[ext_resource type="Shader" path="res://scenes/objects/player/lightoccluder.gdshader" id="1_e66gq"]
[ext_resource type="Script" path="res://scenes/world/items_layer/ItemsLayer.cs" id="1_kfbkp"]
[ext_resource type="Texture2D" uid="uid://cs8lc066c3r4y" path="res://assets/textures/objects/player/lightmask.svg" id="3_y830f"]

[sub_resource type="ViewportTexture" id="ViewportTexture_un02o"]
viewport_path = NodePath("LightmaskViewport")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_va8vk"]
resource_local_to_scene = true
shader = ExtResource("1_e66gq")
shader_parameter/occluder_texture = SubResource("ViewportTexture_un02o")

[node name="ItemsLayer" type="CanvasGroup"]
material = SubResource("ShaderMaterial_va8vk")
script = ExtResource("1_kfbkp")

[node name="LightmaskViewport" type="SubViewport" parent="."]
transparent_bg = true
handle_input_locally = false
size = Vector2i(1152, 648)
render_target_update_mode = 4

[node name="Camera" type="Camera2D" parent="LightmaskViewport"]
zoom = Vector2(4, 4)

[node name="LightMask" type="Sprite2D" parent="LightmaskViewport/Camera"]
light_mask = 0
visibility_layer = 3
scale = Vector2(0.34375, 0.34375)
texture = ExtResource("3_y830f")
